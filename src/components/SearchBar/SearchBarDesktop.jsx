import React, { useState } from 'react'
import { handleSearchOnEnter } from '../../utils/handleSearchOnEnter'
import Suggestion from '../Suggestion/Suggestion'
import './SearchBarDesktop.scss'


function SearchBarDesktop({ searchTerm, onSearch, onSearchClick, onClickSuggestion, disable }) {

  const [isFocus, setIsFocus] = useState(false)
  // eslint-disable-next-line
  const [showSuggestion, setShowSuggestion] = useState(false)

  const handleInputChange = (e) => {
    onSearch(e.target.value)

    if(e.target.value.trim() !== ''){
      setShowSuggestion(true)
    } else {
      setShowSuggestion(false)
    }
  }

  return (
    <div className={`searchdesktop ${disable? 'disabled' : ''}`}>
      <input 
        type="text" 
        name='search' 
        placeholder='Search'
        value={searchTerm}
        onFocus={() => setIsFocus(true)}
        onBlur={() => setTimeout(() => {setIsFocus(false)}, 200)}
        onChange={handleInputChange}
        onKeyDown={(event) => handleSearchOnEnter(event, onSearchClick)} 
      />
      <div className="searchdesktop_searchicon" onClick={onSearchClick}>
        <svg width="20" height="21" viewBox="0 0 20 21" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19.1858 18.3263L15.5025 14.5125C16.6909 12.9403 17.3357 10.9987 17.3333 9.00001C17.3333 7.21997 16.825 5.47991 15.8727 3.99987C14.9204 2.51983 13.5669 1.36628 11.9833 0.685088C10.3996 0.00389953 8.65706 -0.17433 6.97589 0.172937C5.29472 0.520204 3.75047 1.37737 2.53841 2.63604C1.32636 3.89472 0.500937 5.49836 0.166531 7.24419C-0.167874 8.99002 0.0037551 10.7996 0.659715 12.4442C1.31567 14.0887 2.4265 15.4943 3.85173 16.4832C5.27695 17.4722 6.95257 18 8.66667 18C10.5914 18.0025 12.461 17.3329 13.975 16.0988L17.6475 19.9238C17.7482 20.0292 17.868 20.1129 18 20.17C18.1321 20.2271 18.2737 20.2565 18.4167 20.2565C18.5597 20.2565 18.7013 20.2271 18.8333 20.17C18.9653 20.1129 19.0851 20.0292 19.1858 19.9238C19.2874 19.8192 19.368 19.6947 19.423 19.5577C19.478 19.4206 19.5063 19.2735 19.5063 19.125C19.5063 18.9765 19.478 18.8294 19.423 18.6924C19.368 18.5553 19.2874 18.4308 19.1858 18.3263ZM2.16667 9.00001C2.16667 7.66498 2.54789 6.35994 3.26212 5.24991C3.97635 4.13987 4.99151 3.27471 6.17923 2.76382C7.36695 2.25293 8.67388 2.11925 9.93476 2.3797C11.1956 2.64015 12.3538 3.28303 13.2629 4.22703C14.1719 5.17104 14.791 6.37377 15.0418 7.68315C15.2926 8.99252 15.1639 10.3497 14.6719 11.5831C14.1799 12.8165 13.3468 13.8707 12.2779 14.6124C11.209 15.3541 9.95225 15.75 8.66667 15.75C6.94276 15.75 5.28946 15.0388 4.07048 13.773C2.85149 12.5071 2.16667 10.7902 2.16667 9.00001Z" fill="#6F6969"/>
        </svg>
      </div>
      <div className="searchdesktop_filtericon">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0.666667 3.571H0.761333C0.906848 4.1836 1.2387 4.72679 1.70448 5.11475C2.17025 5.50271 2.74338 5.71333 3.33333 5.71333C3.92328 5.71333 4.49642 5.50271 4.96219 5.11475C5.42796 4.72679 5.75982 4.1836 5.90533 3.571H19.3333C19.5101 3.571 19.6797 3.49574 19.8047 3.36178C19.9298 3.22781 20 3.04612 20 2.85667C20 2.66721 19.9298 2.48552 19.8047 2.35156C19.6797 2.21759 19.5101 2.14233 19.3333 2.14233H5.90533C5.75982 1.52973 5.42796 0.986543 4.96219 0.59858C4.49642 0.210618 3.92328 0 3.33333 0C2.74338 0 2.17025 0.210618 1.70448 0.59858C1.2387 0.986543 0.906848 1.52973 0.761333 2.14233H0.666667C0.489856 2.14233 0.320286 2.21759 0.195262 2.35156C0.0702379 2.48552 0 2.66721 0 2.85667C0 3.04612 0.0702379 3.22781 0.195262 3.36178C0.320286 3.49574 0.489856 3.571 0.666667 3.571ZM3.33333 1.428C3.59704 1.428 3.85483 1.51179 4.07409 1.66877C4.29336 1.82576 4.46426 2.04888 4.56517 2.30994C4.66609 2.57099 4.69249 2.85825 4.64105 3.13538C4.5896 3.41252 4.46261 3.66708 4.27614 3.86689C4.08967 4.06669 3.8521 4.20276 3.59345 4.25788C3.33481 4.31301 3.06672 4.28471 2.82309 4.17658C2.57945 4.06845 2.37122 3.88533 2.22471 3.65039C2.0782 3.41545 2 3.13923 2 2.85667C2 2.47776 2.14048 2.11437 2.39052 1.84645C2.64057 1.57852 2.97971 1.428 3.33333 1.428ZM19.3333 9.28567H19.2387C19.0932 8.67307 18.7613 8.12988 18.2955 7.74191C17.8298 7.35395 17.2566 7.14333 16.6667 7.14333C16.0767 7.14333 15.5036 7.35395 15.0378 7.74191C14.572 8.12988 14.2402 8.67307 14.0947 9.28567H0.666667C0.489856 9.28567 0.320286 9.36093 0.195262 9.49489C0.0702379 9.62885 0 9.81055 0 10C0 10.1895 0.0702379 10.3711 0.195262 10.5051C0.320286 10.6391 0.489856 10.7143 0.666667 10.7143H14.0947C14.2402 11.3269 14.572 11.8701 15.0378 12.2581C15.5036 12.646 16.0767 12.8567 16.6667 12.8567C17.2566 12.8567 17.8298 12.646 18.2955 12.2581C18.7613 11.8701 19.0932 11.3269 19.2387 10.7143H19.3333C19.5101 10.7143 19.6797 10.6391 19.8047 10.5051C19.9298 10.3711 20 10.1895 20 10C20 9.81055 19.9298 9.62885 19.8047 9.49489C19.6797 9.36093 19.5101 9.28567 19.3333 9.28567ZM16.6667 11.4287C16.403 11.4287 16.1452 11.3449 15.9259 11.1879C15.7066 11.0309 15.5357 10.8078 15.4348 10.5467C15.3339 10.2857 15.3075 9.99841 15.359 9.72128C15.4104 9.44415 15.5374 9.18958 15.7239 8.98978C15.9103 8.78998 16.1479 8.65391 16.4065 8.59878C16.6652 8.54366 16.9333 8.57195 17.1769 8.68008C17.4205 8.78822 17.6288 8.97133 17.7753 9.20627C17.9218 9.44122 18 9.71744 18 10C18 10.3789 17.8595 10.7423 17.6095 11.0102C17.3594 11.2781 17.0203 11.4287 16.6667 11.4287ZM19.3333 16.429H12.572C12.4265 15.8164 12.0946 15.2732 11.6289 14.8852C11.1631 14.4973 10.59 14.2867 10 14.2867C9.41005 14.2867 8.83692 14.4973 8.37114 14.8852C7.90537 15.2732 7.57351 15.8164 7.428 16.429H0.666667C0.489856 16.429 0.320286 16.5043 0.195262 16.6382C0.0702379 16.7722 0 16.9539 0 17.1433C0 17.3328 0.0702379 17.5145 0.195262 17.6484C0.320286 17.7824 0.489856 17.8577 0.666667 17.8577H7.428C7.57351 18.4703 7.90537 19.0135 8.37114 19.4014C8.83692 19.7894 9.41005 20 10 20C10.59 20 11.1631 19.7894 11.6289 19.4014C12.0946 19.0135 12.4265 18.4703 12.572 17.8577H19.3333C19.5101 17.8577 19.6797 17.7824 19.8047 17.6484C19.9298 17.5145 20 17.3328 20 17.1433C20 16.9539 19.9298 16.7722 19.8047 16.6382C19.6797 16.5043 19.5101 16.429 19.3333 16.429ZM10 18.572C9.73629 18.572 9.47851 18.4882 9.25924 18.3312C9.03997 18.1742 8.86908 17.9511 8.76816 17.6901C8.66724 17.429 8.64084 17.1418 8.69229 16.8646C8.74373 16.5875 8.87072 16.3329 9.05719 16.1331C9.24366 15.9333 9.48124 15.7972 9.73988 15.7421C9.99852 15.687 10.2666 15.7153 10.5102 15.8234C10.7539 15.9316 10.9621 16.1147 11.1086 16.3496C11.2551 16.5846 11.3333 16.8608 11.3333 17.1433C11.3333 17.5222 11.1929 17.8856 10.9428 18.1536C10.6928 18.4215 10.3536 18.572 10 18.572Z" fill="#6F6969"/>
          </svg>
      </div>
      {showSuggestion && <Suggestion searchTerm={searchTerm} isFocus={isFocus} onClickSuggestion={onClickSuggestion} />}
    </div>
  )
}

export default SearchBarDesktop
